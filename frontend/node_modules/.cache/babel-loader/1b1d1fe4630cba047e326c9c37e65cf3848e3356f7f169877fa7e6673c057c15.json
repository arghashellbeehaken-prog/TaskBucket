{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport api from \"../../api/apiClient\";\nexport const fetchTask = createAsyncThunk(\"task/fetch\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await api.get(\"/tasks\");\n    return res.data.data;\n  } catch (err) {\n    var _err$response, _err$response$data;\n    return rejectWithValue(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Failed to fetch tasks\");\n  }\n});\nexport const createTask = createAsyncThunk(\"tasks/create\", async (payload, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await api.post(\"/tasks\", payload);\n    return res.data.data;\n  } catch (err) {\n    var _err$response2, _err$response2$data;\n    return rejectWithValue(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"Failed to create task\");\n  }\n});\nexport const updateTask = createAsyncThunk(\"tasks/update\", async ({\n  id,\n  payload\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await api.put(`/tasks/${id}`, payload);\n    return res.data.data;\n  } catch (err) {\n    var _err$response3, _err$response3$data;\n    return rejectWithValue(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || \"Failed to update task\");\n  }\n});\nexport const deleteTask = createAsyncThunk(\"tasks/delete\", async (id, {\n  rejectWithValue\n}) => {\n  try {\n    await api.delete(`/tasks/${id}`);\n    return id;\n  } catch (err) {\n    var _err$response4, _err$response4$data;\n    return rejectWithValue(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || \"Failed to delete task\");\n  }\n});\nexport const addSubtask = createAsyncThunk(\"tasks/addSubtask\", async ({\n  id,\n  text\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await api.post(`/tasks/${id}/subtasks`, {\n      text\n    });\n    return res.data.data;\n  } catch (err) {\n    var _err$response5, _err$response5$data;\n    return rejectWithValue(((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.message) || \"Failed to add subtask\");\n  }\n});\nexport const toggleSubtask = createAsyncThunk(\"tasks/toggleSubtask\", async ({\n  id,\n  subId\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await api.patch(`/tasks/${id}/subtasks/${subId}/toggle`);\n    return res.data.data;\n  } catch (err) {\n    var _err$response6, _err$response6$data;\n    return rejectWithValue(((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : (_err$response6$data = _err$response6.data) === null || _err$response6$data === void 0 ? void 0 : _err$response6$data.message) || \"Failed to toggle subtask\");\n  }\n});\nexport const deleteSubtask = createAsyncThunk(\"tasks/deleteSubtask\", async ({\n  id,\n  subId\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await api.delete(`/tasks/${id}/subtasks/${subId}`);\n    return res.data.data;\n  } catch (err) {\n    var _err$response7, _err$response7$data;\n    return rejectWithValue(((_err$response7 = err.response) === null || _err$response7 === void 0 ? void 0 : (_err$response7$data = _err$response7.data) === null || _err$response7$data === void 0 ? void 0 : _err$response7$data.message) || \"Failed to delete subtask\");\n  }\n});\nconst slice = createSlice({\n  name: \"tasks\",\n  initialState: {\n    items: [],\n    status: \"idle\"\n  },\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(fetchTask.fulfilled, (state, action) => {\n      state.items = action.payload;\n    }).addCase(createTask.fulfilled, (state, action) => {\n      state.items.unshift(action.payload);\n    }).addCase(updateTask.fulfilled, (state, action) => {\n      const index = state.items.findIndex(t => t._id === action.payload._id);\n      if (index !== -1) {\n        state.items[index] = action.payload;\n      }\n    }).addCase(deleteTask.fulfilled, (state, action) => {\n      state.items = state.items.filter(t => t._id !== action.payload);\n    }).addCase(addSubtask.fulfilled, (state, action) => {\n      const index = state.items.findIndex(t => t._id === action.payload._id);\n      if (index !== -1) {\n        state.items[index] = action.payload;\n      }\n    }).addCase(toggleSubtask.fulfilled, (state, action) => {\n      const index = state.items.findIndex(t => t._id === action.payload._id);\n      if (index !== -1) {\n        state.items[index] = action.payload;\n      }\n    }).addCase(deleteSubtask.fulfilled, (state, action) => {\n      const index = state.items.findIndex(t => t._id === action.payload._id);\n      if (index !== -1) {\n        state.items[index] = action.payload;\n      }\n    });\n  }\n});\nexport default slice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","api","fetchTask","_","rejectWithValue","res","get","data","err","_err$response","_err$response$data","response","message","createTask","payload","post","_err$response2","_err$response2$data","updateTask","id","put","_err$response3","_err$response3$data","deleteTask","delete","_err$response4","_err$response4$data","addSubtask","text","_err$response5","_err$response5$data","toggleSubtask","subId","patch","_err$response6","_err$response6$data","deleteSubtask","_err$response7","_err$response7$data","slice","name","initialState","items","status","reducers","extraReducers","builder","addCase","fulfilled","state","action","unshift","index","findIndex","t","_id","filter","reducer"],"sources":["/home/sbh/divyo/TaskManager/frontend/src/features/tasks/tasksSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport api from \"../../api/apiClient\";\n\nexport const fetchTask = createAsyncThunk(\"task/fetch\", async (_, { rejectWithValue }) => {\n  try {\n    const res = await api.get(\"/tasks\");\n    return res.data.data;\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Failed to fetch tasks\");\n  }\n});\n\nexport const createTask = createAsyncThunk(\"tasks/create\", async (payload, { rejectWithValue }) => {\n  try {\n    const res = await api.post(\"/tasks\", payload);\n    return res.data.data;\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Failed to create task\");\n  }\n});\n\nexport const updateTask = createAsyncThunk(\"tasks/update\", async ({ id, payload }, { rejectWithValue }) => {\n  try {\n    const res = await api.put(`/tasks/${id}`, payload);\n    return res.data.data;\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Failed to update task\");\n  }\n});\n\nexport const deleteTask = createAsyncThunk(\"tasks/delete\", async (id, { rejectWithValue }) => {\n  try {\n    await api.delete(`/tasks/${id}`);\n    return id;\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Failed to delete task\");\n  }\n});\n\nexport const addSubtask = createAsyncThunk(\"tasks/addSubtask\", async ({ id, text }, { rejectWithValue }) => {\n  try {\n    const res = await api.post(`/tasks/${id}/subtasks`, { text });\n    return res.data.data;\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Failed to add subtask\");\n  }\n});\n\nexport const toggleSubtask = createAsyncThunk(\"tasks/toggleSubtask\", async ({ id, subId }, { rejectWithValue }) => {\n  try {\n    const res = await api.patch(`/tasks/${id}/subtasks/${subId}/toggle`);\n    return res.data.data;\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Failed to toggle subtask\");\n  }\n});\n\nexport const deleteSubtask = createAsyncThunk(\"tasks/deleteSubtask\", async ({ id, subId }, { rejectWithValue }) => {\n  try {\n    const res = await api.delete(`/tasks/${id}/subtasks/${subId}`);\n    return res.data.data;\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Failed to delete subtask\");\n  }\n});\n\nconst slice = createSlice({\n  name: \"tasks\",\n  initialState: { items: [], status: \"idle\" },\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchTask.fulfilled, (state, action) => {\n        state.items = action.payload;\n      })\n      .addCase(createTask.fulfilled, (state, action) => {\n        state.items.unshift(action.payload);\n      })\n      .addCase(updateTask.fulfilled, (state, action) => {\n        const index = state.items.findIndex((t) => t._id === action.payload._id);\n        if (index !== -1) {\n          state.items[index] = action.payload;\n        }\n      })\n      .addCase(deleteTask.fulfilled, (state, action) => {\n        state.items = state.items.filter((t) => t._id !== action.payload);\n      })\n      .addCase(addSubtask.fulfilled, (state, action) => {\n        const index = state.items.findIndex((t) => t._id === action.payload._id);\n        if (index !== -1) {\n          state.items[index] = action.payload;\n        }\n      })\n      .addCase(toggleSubtask.fulfilled, (state, action) => {\n        const index = state.items.findIndex((t) => t._id === action.payload._id);\n        if (index !== -1) {\n          state.items[index] = action.payload;\n        }\n      })\n      .addCase(deleteSubtask.fulfilled, (state, action) => {\n        const index = state.items.findIndex((t) => t._id === action.payload._id);\n        if (index !== -1) {\n          state.items[index] = action.payload;\n        }\n      });\n  },\n});\n\nexport default slice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}