{"ast":null,"code":"// src/features/tasks/tasksSlice.js\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport api from \"../../api/apiClient\";\n\n// Async thunks\nexport const fetchTasks = createAsyncThunk(\"tasks/fetchTasks\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await api.get(\"/tasks\");\n    return res.data.tasks; // assuming API returns { tasks: [...] }\n  } catch (err) {\n    var _err$response, _err$response$data;\n    return rejectWithValue(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Fetch failed\");\n  }\n});\nexport const addTask = createAsyncThunk(\"tasks/addTask\", async (payload, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await api.post(\"/tasks\", payload);\n    return res.data.task; // assuming API returns { task: {...} }\n  } catch (err) {\n    var _err$response2, _err$response2$data;\n    return rejectWithValue(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"Add task failed\");\n  }\n});\nexport const updateTask = createAsyncThunk(\"tasks/updateTask\", async ({\n  id,\n  updates\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await api.put(`/tasks/${id}`, updates);\n    return res.data.task; // assuming API returns updated task\n  } catch (err) {\n    var _err$response3, _err$response3$data;\n    return rejectWithValue(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || \"Update task failed\");\n  }\n});\nexport const deleteTask = createAsyncThunk(\"tasks/deleteTask\", async (id, {\n  rejectWithValue\n}) => {\n  try {\n    await api.delete(`/tasks/${id}`);\n    return id; // return deleted task id\n  } catch (err) {\n    var _err$response4, _err$response4$data;\n    return rejectWithValue(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || \"Delete task failed\");\n  }\n});\n\n// Initial state\nconst initialState = {\n  tasks: [],\n  status: \"idle\",\n  error: null\n};\n\n// Slice\nconst tasksSlice = createSlice({\n  name: \"tasks\",\n  initialState,\n  reducers: {\n    resetError(state) {\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Fetch tasks\n    .addCase(fetchTasks.pending, state => {\n      state.status = \"loading\";\n      state.error = null;\n    }).addCase(fetchTasks.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.tasks = action.payload; // Immer-safe\n    }).addCase(fetchTasks.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.payload;\n    })\n\n    // Add task\n    .addCase(addTask.pending, state => {\n      state.status = \"loading\";\n      state.error = null;\n    }).addCase(addTask.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.tasks.push(action.payload); // Immer-safe\n    }).addCase(addTask.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.payload;\n    })\n\n    // Update task\n    .addCase(updateTask.pending, state => {\n      state.status = \"loading\";\n      state.error = null;\n    }).addCase(updateTask.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      const index = state.tasks.findIndex(t => t.id === action.payload.id);\n      if (index !== -1) {\n        state.tasks[index] = action.payload; // Immer-safe\n      }\n    }).addCase(updateTask.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.payload;\n    })\n\n    // Delete task\n    .addCase(deleteTask.pending, state => {\n      state.status = \"loading\";\n      state.error = null;\n    }).addCase(deleteTask.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.tasks = state.tasks.filter(t => t.id !== action.payload); // Immer-safe\n    }).addCase(deleteTask.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  resetError\n} = tasksSlice.actions;\nexport default tasksSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","fetchTasks","_","rejectWithValue","res","get","data","tasks","err","_err$response","_err$response$data","response","message","addTask","payload","post","task","_err$response2","_err$response2$data","updateTask","id","updates","put","_err$response3","_err$response3$data","deleteTask","delete","_err$response4","_err$response4$data","initialState","status","error","tasksSlice","name","reducers","resetError","state","extraReducers","builder","addCase","pending","fulfilled","action","rejected","push","index","findIndex","t","filter","actions","reducer"],"sources":["/home/sbh/divyo/TaskManager/frontend/src/store.js"],"sourcesContent":["// src/features/tasks/tasksSlice.js\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport api from \"../../api/apiClient\";\n\n// Async thunks\nexport const fetchTasks = createAsyncThunk(\"tasks/fetchTasks\", async (_, { rejectWithValue }) => {\n  try {\n    const res = await api.get(\"/tasks\");\n    return res.data.tasks; // assuming API returns { tasks: [...] }\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Fetch failed\");\n  }\n});\n\nexport const addTask = createAsyncThunk(\"tasks/addTask\", async (payload, { rejectWithValue }) => {\n  try {\n    const res = await api.post(\"/tasks\", payload);\n    return res.data.task; // assuming API returns { task: {...} }\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Add task failed\");\n  }\n});\n\nexport const updateTask = createAsyncThunk(\n  \"tasks/updateTask\",\n  async ({ id, updates }, { rejectWithValue }) => {\n    try {\n      const res = await api.put(`/tasks/${id}`, updates);\n      return res.data.task; // assuming API returns updated task\n    } catch (err) {\n      return rejectWithValue(err.response?.data?.message || \"Update task failed\");\n    }\n  }\n);\n\nexport const deleteTask = createAsyncThunk(\"tasks/deleteTask\", async (id, { rejectWithValue }) => {\n  try {\n    await api.delete(`/tasks/${id}`);\n    return id; // return deleted task id\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Delete task failed\");\n  }\n});\n\n// Initial state\nconst initialState = {\n  tasks: [],\n  status: \"idle\",\n  error: null,\n};\n\n// Slice\nconst tasksSlice = createSlice({\n  name: \"tasks\",\n  initialState,\n  reducers: {\n    resetError(state) {\n      state.error = null;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      // Fetch tasks\n      .addCase(fetchTasks.pending, (state) => {\n        state.status = \"loading\";\n        state.error = null;\n      })\n      .addCase(fetchTasks.fulfilled, (state, action) => {\n        state.status = \"succeeded\";\n        state.tasks = action.payload; // Immer-safe\n      })\n      .addCase(fetchTasks.rejected, (state, action) => {\n        state.status = \"failed\";\n        state.error = action.payload;\n      })\n\n      // Add task\n      .addCase(addTask.pending, (state) => {\n        state.status = \"loading\";\n        state.error = null;\n      })\n      .addCase(addTask.fulfilled, (state, action) => {\n        state.status = \"succeeded\";\n        state.tasks.push(action.payload); // Immer-safe\n      })\n      .addCase(addTask.rejected, (state, action) => {\n        state.status = \"failed\";\n        state.error = action.payload;\n      })\n\n      // Update task\n      .addCase(updateTask.pending, (state) => {\n        state.status = \"loading\";\n        state.error = null;\n      })\n      .addCase(updateTask.fulfilled, (state, action) => {\n        state.status = \"succeeded\";\n        const index = state.tasks.findIndex((t) => t.id === action.payload.id);\n        if (index !== -1) {\n          state.tasks[index] = action.payload; // Immer-safe\n        }\n      })\n      .addCase(updateTask.rejected, (state, action) => {\n        state.status = \"failed\";\n        state.error = action.payload;\n      })\n\n      // Delete task\n      .addCase(deleteTask.pending, (state) => {\n        state.status = \"loading\";\n        state.error = null;\n      })\n      .addCase(deleteTask.fulfilled, (state, action) => {\n        state.status = \"succeeded\";\n        state.tasks = state.tasks.filter((t) => t.id !== action.payload); // Immer-safe\n      })\n      .addCase(deleteTask.rejected, (state, action) => {\n        state.status = \"failed\";\n        state.error = action.payload;\n      });\n  },\n});\n\nexport const { resetError } = tasksSlice.actions;\nexport default tasksSlice.reducer;\n"],"mappings":"AAAA;AACA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,OAAOC,GAAG,MAAM,qBAAqB;;AAErC;AACA,OAAO,MAAMC,UAAU,GAAGF,gBAAgB,CAAC,kBAAkB,EAAE,OAAOG,CAAC,EAAE;EAAEC;AAAgB,CAAC,KAAK;EAC/F,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMJ,GAAG,CAACK,GAAG,CAAC,QAAQ,CAAC;IACnC,OAAOD,GAAG,CAACE,IAAI,CAACC,KAAK,CAAC,CAAC;EACzB,CAAC,CAAC,OAAOC,GAAG,EAAE;IAAA,IAAAC,aAAA,EAAAC,kBAAA;IACZ,OAAOP,eAAe,CAAC,EAAAM,aAAA,GAAAD,GAAG,CAACG,QAAQ,cAAAF,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcH,IAAI,cAAAI,kBAAA,uBAAlBA,kBAAA,CAAoBE,OAAO,KAAI,cAAc,CAAC;EACvE;AACF,CAAC,CAAC;AAEF,OAAO,MAAMC,OAAO,GAAGd,gBAAgB,CAAC,eAAe,EAAE,OAAOe,OAAO,EAAE;EAAEX;AAAgB,CAAC,KAAK;EAC/F,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMJ,GAAG,CAACe,IAAI,CAAC,QAAQ,EAAED,OAAO,CAAC;IAC7C,OAAOV,GAAG,CAACE,IAAI,CAACU,IAAI,CAAC,CAAC;EACxB,CAAC,CAAC,OAAOR,GAAG,EAAE;IAAA,IAAAS,cAAA,EAAAC,mBAAA;IACZ,OAAOf,eAAe,CAAC,EAAAc,cAAA,GAAAT,GAAG,CAACG,QAAQ,cAAAM,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcX,IAAI,cAAAY,mBAAA,uBAAlBA,mBAAA,CAAoBN,OAAO,KAAI,iBAAiB,CAAC;EAC1E;AACF,CAAC,CAAC;AAEF,OAAO,MAAMO,UAAU,GAAGpB,gBAAgB,CACxC,kBAAkB,EAClB,OAAO;EAAEqB,EAAE;EAAEC;AAAQ,CAAC,EAAE;EAAElB;AAAgB,CAAC,KAAK;EAC9C,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMJ,GAAG,CAACsB,GAAG,CAAC,UAAUF,EAAE,EAAE,EAAEC,OAAO,CAAC;IAClD,OAAOjB,GAAG,CAACE,IAAI,CAACU,IAAI,CAAC,CAAC;EACxB,CAAC,CAAC,OAAOR,GAAG,EAAE;IAAA,IAAAe,cAAA,EAAAC,mBAAA;IACZ,OAAOrB,eAAe,CAAC,EAAAoB,cAAA,GAAAf,GAAG,CAACG,QAAQ,cAAAY,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcjB,IAAI,cAAAkB,mBAAA,uBAAlBA,mBAAA,CAAoBZ,OAAO,KAAI,oBAAoB,CAAC;EAC7E;AACF,CACF,CAAC;AAED,OAAO,MAAMa,UAAU,GAAG1B,gBAAgB,CAAC,kBAAkB,EAAE,OAAOqB,EAAE,EAAE;EAAEjB;AAAgB,CAAC,KAAK;EAChG,IAAI;IACF,MAAMH,GAAG,CAAC0B,MAAM,CAAC,UAAUN,EAAE,EAAE,CAAC;IAChC,OAAOA,EAAE,CAAC,CAAC;EACb,CAAC,CAAC,OAAOZ,GAAG,EAAE;IAAA,IAAAmB,cAAA,EAAAC,mBAAA;IACZ,OAAOzB,eAAe,CAAC,EAAAwB,cAAA,GAAAnB,GAAG,CAACG,QAAQ,cAAAgB,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcrB,IAAI,cAAAsB,mBAAA,uBAAlBA,mBAAA,CAAoBhB,OAAO,KAAI,oBAAoB,CAAC;EAC7E;AACF,CAAC,CAAC;;AAEF;AACA,MAAMiB,YAAY,GAAG;EACnBtB,KAAK,EAAE,EAAE;EACTuB,MAAM,EAAE,MAAM;EACdC,KAAK,EAAE;AACT,CAAC;;AAED;AACA,MAAMC,UAAU,GAAGlC,WAAW,CAAC;EAC7BmC,IAAI,EAAE,OAAO;EACbJ,YAAY;EACZK,QAAQ,EAAE;IACRC,UAAUA,CAACC,KAAK,EAAE;MAChBA,KAAK,CAACL,KAAK,GAAG,IAAI;IACpB;EACF,CAAC;EACDM,aAAa,EAAGC,OAAO,IAAK;IAC1BA;IACE;IAAA,CACCC,OAAO,CAACtC,UAAU,CAACuC,OAAO,EAAGJ,KAAK,IAAK;MACtCA,KAAK,CAACN,MAAM,GAAG,SAAS;MACxBM,KAAK,CAACL,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDQ,OAAO,CAACtC,UAAU,CAACwC,SAAS,EAAE,CAACL,KAAK,EAAEM,MAAM,KAAK;MAChDN,KAAK,CAACN,MAAM,GAAG,WAAW;MAC1BM,KAAK,CAAC7B,KAAK,GAAGmC,MAAM,CAAC5B,OAAO,CAAC,CAAC;IAChC,CAAC,CAAC,CACDyB,OAAO,CAACtC,UAAU,CAAC0C,QAAQ,EAAE,CAACP,KAAK,EAAEM,MAAM,KAAK;MAC/CN,KAAK,CAACN,MAAM,GAAG,QAAQ;MACvBM,KAAK,CAACL,KAAK,GAAGW,MAAM,CAAC5B,OAAO;IAC9B,CAAC;;IAED;IAAA,CACCyB,OAAO,CAAC1B,OAAO,CAAC2B,OAAO,EAAGJ,KAAK,IAAK;MACnCA,KAAK,CAACN,MAAM,GAAG,SAAS;MACxBM,KAAK,CAACL,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDQ,OAAO,CAAC1B,OAAO,CAAC4B,SAAS,EAAE,CAACL,KAAK,EAAEM,MAAM,KAAK;MAC7CN,KAAK,CAACN,MAAM,GAAG,WAAW;MAC1BM,KAAK,CAAC7B,KAAK,CAACqC,IAAI,CAACF,MAAM,CAAC5B,OAAO,CAAC,CAAC,CAAC;IACpC,CAAC,CAAC,CACDyB,OAAO,CAAC1B,OAAO,CAAC8B,QAAQ,EAAE,CAACP,KAAK,EAAEM,MAAM,KAAK;MAC5CN,KAAK,CAACN,MAAM,GAAG,QAAQ;MACvBM,KAAK,CAACL,KAAK,GAAGW,MAAM,CAAC5B,OAAO;IAC9B,CAAC;;IAED;IAAA,CACCyB,OAAO,CAACpB,UAAU,CAACqB,OAAO,EAAGJ,KAAK,IAAK;MACtCA,KAAK,CAACN,MAAM,GAAG,SAAS;MACxBM,KAAK,CAACL,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDQ,OAAO,CAACpB,UAAU,CAACsB,SAAS,EAAE,CAACL,KAAK,EAAEM,MAAM,KAAK;MAChDN,KAAK,CAACN,MAAM,GAAG,WAAW;MAC1B,MAAMe,KAAK,GAAGT,KAAK,CAAC7B,KAAK,CAACuC,SAAS,CAAEC,CAAC,IAAKA,CAAC,CAAC3B,EAAE,KAAKsB,MAAM,CAAC5B,OAAO,CAACM,EAAE,CAAC;MACtE,IAAIyB,KAAK,KAAK,CAAC,CAAC,EAAE;QAChBT,KAAK,CAAC7B,KAAK,CAACsC,KAAK,CAAC,GAAGH,MAAM,CAAC5B,OAAO,CAAC,CAAC;MACvC;IACF,CAAC,CAAC,CACDyB,OAAO,CAACpB,UAAU,CAACwB,QAAQ,EAAE,CAACP,KAAK,EAAEM,MAAM,KAAK;MAC/CN,KAAK,CAACN,MAAM,GAAG,QAAQ;MACvBM,KAAK,CAACL,KAAK,GAAGW,MAAM,CAAC5B,OAAO;IAC9B,CAAC;;IAED;IAAA,CACCyB,OAAO,CAACd,UAAU,CAACe,OAAO,EAAGJ,KAAK,IAAK;MACtCA,KAAK,CAACN,MAAM,GAAG,SAAS;MACxBM,KAAK,CAACL,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDQ,OAAO,CAACd,UAAU,CAACgB,SAAS,EAAE,CAACL,KAAK,EAAEM,MAAM,KAAK;MAChDN,KAAK,CAACN,MAAM,GAAG,WAAW;MAC1BM,KAAK,CAAC7B,KAAK,GAAG6B,KAAK,CAAC7B,KAAK,CAACyC,MAAM,CAAED,CAAC,IAAKA,CAAC,CAAC3B,EAAE,KAAKsB,MAAM,CAAC5B,OAAO,CAAC,CAAC,CAAC;IACpE,CAAC,CAAC,CACDyB,OAAO,CAACd,UAAU,CAACkB,QAAQ,EAAE,CAACP,KAAK,EAAEM,MAAM,KAAK;MAC/CN,KAAK,CAACN,MAAM,GAAG,QAAQ;MACvBM,KAAK,CAACL,KAAK,GAAGW,MAAM,CAAC5B,OAAO;IAC9B,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEqB;AAAW,CAAC,GAAGH,UAAU,CAACiB,OAAO;AAChD,eAAejB,UAAU,CAACkB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}