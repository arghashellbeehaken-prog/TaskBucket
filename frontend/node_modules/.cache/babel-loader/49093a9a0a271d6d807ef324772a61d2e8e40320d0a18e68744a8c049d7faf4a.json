{"ast":null,"code":"// src/features/auth/authSlice.js\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport api from \"../../api/apiClient\";\n\n// Async thunks\nexport const signup = createAsyncThunk(\"auth/signup\", async (payload, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await api.post(\"/auth/signup\", payload);\n    return res.data.user;\n  } catch (err) {\n    var _err$response, _err$response$data;\n    return rejectWithValue(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Signup failed\");\n  }\n});\nexport const login = createAsyncThunk(\"auth/login\", async (payload, {\n  rejectWithValue\n}) => {\n  try {\n    console.log(\"eikhane dhukse at least\");\n    const res = await api.post(\"/auth/login\", payload);\n    return res.data.user;\n  } catch (err) {\n    var _err$response2, _err$response2$data;\n    console.log(\"eikhane error hocche.......\");\n    return rejectWithValue(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"Login failed\");\n  }\n});\nexport const logout = createAsyncThunk(\"auth/logout\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    await api.post(\"/auth/logout\");\n    return null;\n  } catch (err) {\n    var _err$response3, _err$response3$data;\n    return rejectWithValue(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || \"Logout failed\");\n  }\n});\nexport const fetchMe = createAsyncThunk(\"auth/fetchMe\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await api.get(\"/auth/me\");\n    return res.data.user;\n  } catch (err) {\n    var _err$response4, _err$response4$data;\n    return rejectWithValue(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || \"Fetch failed\");\n  }\n});\n\n// Initial state\nconst initialState = {\n  user: null,\n  status: \"idle\",\n  error: null\n};\n\n// Slice\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    resetError(state) {\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(signup.pending, state => {\n      state.status = \"loading\";\n      state.error = null;\n    }).addCase(signup.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.user = action.payload;\n    }).addCase(signup.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.payload;\n    }).addCase(login.pending, state => {\n      state.status = \"loading\";\n      state.error = null;\n    }).addCase(login.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      console.log(\"reducer er vitoreo dhukse..\");\n      state.user = {\n        ...(action.payload ? action.payload : null)\n      };\n      console.log(state.user);\n    }).addCase(login.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.payload;\n    }).addCase(logout.fulfilled, state => {\n      state.user = null;\n      state.status = \"idle\";\n      state.error = null;\n    }).addCase(fetchMe.fulfilled, (state, action) => {\n      state.user = action.payload;\n      state.status = \"succeeded\";\n    }).addCase(fetchMe.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  resetError\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","signup","payload","rejectWithValue","res","post","data","user","err","_err$response","_err$response$data","response","message","login","console","log","_err$response2","_err$response2$data","logout","_","_err$response3","_err$response3$data","fetchMe","get","_err$response4","_err$response4$data","initialState","status","error","authSlice","name","reducers","resetError","state","extraReducers","builder","addCase","pending","fulfilled","action","rejected","actions","reducer"],"sources":["/home/sbh/divyo/TaskManager/frontend/src/features/auth/authSlice.js"],"sourcesContent":["// src/features/auth/authSlice.js\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport api from \"../../api/apiClient\";\n\n// Async thunks\nexport const signup = createAsyncThunk(\"auth/signup\", async (payload, { rejectWithValue }) => {\n  try {\n    const res = await api.post(\"/auth/signup\", payload);\n    return res.data.user;\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Signup failed\");\n  }\n});\n\nexport const login = createAsyncThunk(\"auth/login\", async (payload, { rejectWithValue }) => {\n  try {\n    console.log(\"eikhane dhukse at least\");\n    const res = await api.post(\"/auth/login\", payload);\n    return res.data.user;\n  } catch (err) {\n    console.log(\"eikhane error hocche.......\");\n    return rejectWithValue(err.response?.data?.message || \"Login failed\");\n  }\n});\n\nexport const logout = createAsyncThunk(\"auth/logout\", async (_, { rejectWithValue }) => {\n  try {\n    await api.post(\"/auth/logout\");\n    return null;\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Logout failed\");\n  }\n});\n\nexport const fetchMe = createAsyncThunk(\"auth/fetchMe\", async (_, { rejectWithValue }) => {\n  try {\n    const res = await api.get(\"/auth/me\");\n    return res.data.user;\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Fetch failed\");\n  }\n});\n\n// Initial state\nconst initialState = {\n  user: null,\n  status: \"idle\",\n  error: null,\n};\n\n// Slice\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    resetError(state) {\n      state.error = null;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(signup.pending, (state) => {\n        state.status = \"loading\";\n        state.error = null;\n      })\n      .addCase(signup.fulfilled, (state, action) => {\n        state.status = \"succeeded\";\n        state.user = action.payload;\n      })\n      .addCase(signup.rejected, (state, action) => {\n        state.status = \"failed\";\n        state.error = action.payload;\n      })\n\n      .addCase(login.pending, (state) => {\n        state.status = \"loading\";\n        state.error = null;\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.status = \"succeeded\";\n        console.log(\"reducer er vitoreo dhukse..\");\n        state.user = { ...(action.payload ? action.payload : null) };\n        console.log(state.user);\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.status = \"failed\";\n        state.error = action.payload;\n      })\n\n      .addCase(logout.fulfilled, (state) => {\n        state.user = null;\n        state.status = \"idle\";\n        state.error = null;\n      })\n\n      .addCase(fetchMe.fulfilled, (state, action) => {\n        state.user = action.payload;\n        state.status = \"succeeded\";\n      })\n      .addCase(fetchMe.rejected, (state, action) => {\n        state.status = \"failed\";\n        state.error = action.payload;\n      });\n  },\n});\n\nexport const { resetError } = authSlice.actions;\nexport default authSlice.reducer;\n"],"mappings":"AAAA;AACA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,OAAOC,GAAG,MAAM,qBAAqB;;AAErC;AACA,OAAO,MAAMC,MAAM,GAAGF,gBAAgB,CAAC,aAAa,EAAE,OAAOG,OAAO,EAAE;EAAEC;AAAgB,CAAC,KAAK;EAC5F,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,cAAc,EAAEH,OAAO,CAAC;IACnD,OAAOE,GAAG,CAACE,IAAI,CAACC,IAAI;EACtB,CAAC,CAAC,OAAOC,GAAG,EAAE;IAAA,IAAAC,aAAA,EAAAC,kBAAA;IACZ,OAAOP,eAAe,CAAC,EAAAM,aAAA,GAAAD,GAAG,CAACG,QAAQ,cAAAF,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcH,IAAI,cAAAI,kBAAA,uBAAlBA,kBAAA,CAAoBE,OAAO,KAAI,eAAe,CAAC;EACxE;AACF,CAAC,CAAC;AAEF,OAAO,MAAMC,KAAK,GAAGd,gBAAgB,CAAC,YAAY,EAAE,OAAOG,OAAO,EAAE;EAAEC;AAAgB,CAAC,KAAK;EAC1F,IAAI;IACFW,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;IACtC,MAAMX,GAAG,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,aAAa,EAAEH,OAAO,CAAC;IAClD,OAAOE,GAAG,CAACE,IAAI,CAACC,IAAI;EACtB,CAAC,CAAC,OAAOC,GAAG,EAAE;IAAA,IAAAQ,cAAA,EAAAC,mBAAA;IACZH,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;IAC1C,OAAOZ,eAAe,CAAC,EAAAa,cAAA,GAAAR,GAAG,CAACG,QAAQ,cAAAK,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcV,IAAI,cAAAW,mBAAA,uBAAlBA,mBAAA,CAAoBL,OAAO,KAAI,cAAc,CAAC;EACvE;AACF,CAAC,CAAC;AAEF,OAAO,MAAMM,MAAM,GAAGnB,gBAAgB,CAAC,aAAa,EAAE,OAAOoB,CAAC,EAAE;EAAEhB;AAAgB,CAAC,KAAK;EACtF,IAAI;IACF,MAAMH,GAAG,CAACK,IAAI,CAAC,cAAc,CAAC;IAC9B,OAAO,IAAI;EACb,CAAC,CAAC,OAAOG,GAAG,EAAE;IAAA,IAAAY,cAAA,EAAAC,mBAAA;IACZ,OAAOlB,eAAe,CAAC,EAAAiB,cAAA,GAAAZ,GAAG,CAACG,QAAQ,cAAAS,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcd,IAAI,cAAAe,mBAAA,uBAAlBA,mBAAA,CAAoBT,OAAO,KAAI,eAAe,CAAC;EACxE;AACF,CAAC,CAAC;AAEF,OAAO,MAAMU,OAAO,GAAGvB,gBAAgB,CAAC,cAAc,EAAE,OAAOoB,CAAC,EAAE;EAAEhB;AAAgB,CAAC,KAAK;EACxF,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMJ,GAAG,CAACuB,GAAG,CAAC,UAAU,CAAC;IACrC,OAAOnB,GAAG,CAACE,IAAI,CAACC,IAAI;EACtB,CAAC,CAAC,OAAOC,GAAG,EAAE;IAAA,IAAAgB,cAAA,EAAAC,mBAAA;IACZ,OAAOtB,eAAe,CAAC,EAAAqB,cAAA,GAAAhB,GAAG,CAACG,QAAQ,cAAAa,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAclB,IAAI,cAAAmB,mBAAA,uBAAlBA,mBAAA,CAAoBb,OAAO,KAAI,cAAc,CAAC;EACvE;AACF,CAAC,CAAC;;AAEF;AACA,MAAMc,YAAY,GAAG;EACnBnB,IAAI,EAAE,IAAI;EACVoB,MAAM,EAAE,MAAM;EACdC,KAAK,EAAE;AACT,CAAC;;AAED;AACA,MAAMC,SAAS,GAAG/B,WAAW,CAAC;EAC5BgC,IAAI,EAAE,MAAM;EACZJ,YAAY;EACZK,QAAQ,EAAE;IACRC,UAAUA,CAACC,KAAK,EAAE;MAChBA,KAAK,CAACL,KAAK,GAAG,IAAI;IACpB;EACF,CAAC;EACDM,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAACnC,MAAM,CAACoC,OAAO,EAAGJ,KAAK,IAAK;MAClCA,KAAK,CAACN,MAAM,GAAG,SAAS;MACxBM,KAAK,CAACL,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDQ,OAAO,CAACnC,MAAM,CAACqC,SAAS,EAAE,CAACL,KAAK,EAAEM,MAAM,KAAK;MAC5CN,KAAK,CAACN,MAAM,GAAG,WAAW;MAC1BM,KAAK,CAAC1B,IAAI,GAAGgC,MAAM,CAACrC,OAAO;IAC7B,CAAC,CAAC,CACDkC,OAAO,CAACnC,MAAM,CAACuC,QAAQ,EAAE,CAACP,KAAK,EAAEM,MAAM,KAAK;MAC3CN,KAAK,CAACN,MAAM,GAAG,QAAQ;MACvBM,KAAK,CAACL,KAAK,GAAGW,MAAM,CAACrC,OAAO;IAC9B,CAAC,CAAC,CAEDkC,OAAO,CAACvB,KAAK,CAACwB,OAAO,EAAGJ,KAAK,IAAK;MACjCA,KAAK,CAACN,MAAM,GAAG,SAAS;MACxBM,KAAK,CAACL,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDQ,OAAO,CAACvB,KAAK,CAACyB,SAAS,EAAE,CAACL,KAAK,EAAEM,MAAM,KAAK;MAC3CN,KAAK,CAACN,MAAM,GAAG,WAAW;MAC1Bb,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;MAC1CkB,KAAK,CAAC1B,IAAI,GAAG;QAAE,IAAIgC,MAAM,CAACrC,OAAO,GAAGqC,MAAM,CAACrC,OAAO,GAAG,IAAI;MAAE,CAAC;MAC5DY,OAAO,CAACC,GAAG,CAACkB,KAAK,CAAC1B,IAAI,CAAC;IACzB,CAAC,CAAC,CACD6B,OAAO,CAACvB,KAAK,CAAC2B,QAAQ,EAAE,CAACP,KAAK,EAAEM,MAAM,KAAK;MAC1CN,KAAK,CAACN,MAAM,GAAG,QAAQ;MACvBM,KAAK,CAACL,KAAK,GAAGW,MAAM,CAACrC,OAAO;IAC9B,CAAC,CAAC,CAEDkC,OAAO,CAAClB,MAAM,CAACoB,SAAS,EAAGL,KAAK,IAAK;MACpCA,KAAK,CAAC1B,IAAI,GAAG,IAAI;MACjB0B,KAAK,CAACN,MAAM,GAAG,MAAM;MACrBM,KAAK,CAACL,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CAEDQ,OAAO,CAACd,OAAO,CAACgB,SAAS,EAAE,CAACL,KAAK,EAAEM,MAAM,KAAK;MAC7CN,KAAK,CAAC1B,IAAI,GAAGgC,MAAM,CAACrC,OAAO;MAC3B+B,KAAK,CAACN,MAAM,GAAG,WAAW;IAC5B,CAAC,CAAC,CACDS,OAAO,CAACd,OAAO,CAACkB,QAAQ,EAAE,CAACP,KAAK,EAAEM,MAAM,KAAK;MAC5CN,KAAK,CAACN,MAAM,GAAG,QAAQ;MACvBM,KAAK,CAACL,KAAK,GAAGW,MAAM,CAACrC,OAAO;IAC9B,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAE8B;AAAW,CAAC,GAAGH,SAAS,CAACY,OAAO;AAC/C,eAAeZ,SAAS,CAACa,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}