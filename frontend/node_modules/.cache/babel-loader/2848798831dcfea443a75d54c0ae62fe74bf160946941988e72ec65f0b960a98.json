{"ast":null,"code":"// src/features/auth/authSlice.js\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport api from \"../../api/apiClient\";\n\n// Async actions\nexport const signup = createAsyncThunk(\"auth/signup\", async (payload, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await api.post(\"/auth/signup\", payload);\n    return res.data.user;\n  } catch (err) {\n    var _err$response, _err$response$data;\n    return rejectWithValue(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Signup failed\");\n  }\n});\nexport const login = createAsyncThunk(\"auth/login\", async (payload, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await api.post(\"/auth/login\", payload);\n    return res.data.user;\n  } catch (err) {\n    var _err$response2, _err$response2$data;\n    return rejectWithValue(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"Login failed\");\n  }\n});\nexport const logout = createAsyncThunk(\"auth/logout\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    await api.post(\"/auth/logout\");\n    return null;\n  } catch (err) {\n    var _err$response3, _err$response3$data;\n    return rejectWithValue(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || \"Logout failed\");\n  }\n});\nexport const fetchMe = createAsyncThunk(\"auth/fetchMe\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await api.get(\"/auth/me\");\n    return res.data.user;\n  } catch (err) {\n    var _err$response4, _err$response4$data;\n    return rejectWithValue(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || \"Fetch user failed\");\n  }\n});\n\n// Initial state\nconst initialState = {\n  user: null,\n  status: \"idle\",\n  // 'idle' | 'loading' | 'succeeded' | 'failed'\n  error: null\n};\n\n// Slice\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    resetError(state) {\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Signup\n    .addCase(signup.pending, state => {\n      state.status = \"loading\";\n      state.error = null;\n    }).addCase(signup.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.user = action.payload;\n    }).addCase(signup.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.payload;\n    })\n\n    // Login\n    .addCase(login.pending, state => {\n      state.status = \"loading\";\n      state.error = null;\n    }).addCase(login.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.user = action.payload;\n    }).addCase(login.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.payload;\n    })\n\n    // Logout\n    .addCase(logout.fulfilled, state => {\n      state.status = \"idle\";\n      state.user = null;\n      state.error = null;\n    }).addCase(logout.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.payload;\n    })\n\n    // Fetch Me\n    .addCase(fetchMe.pending, state => {\n      state.status = \"loading\";\n      state.error = null;\n    }).addCase(fetchMe.fulfilled, (state, action) => {\n      state.status = \"succeeded\";\n      state.user = action.payload;\n    }).addCase(fetchMe.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.payload;\n    });\n  }\n});\n\n// Export actions and reducer\nexport const {\n  resetError\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","signup","payload","rejectWithValue","res","post","data","user","err","_err$response","_err$response$data","response","message","login","_err$response2","_err$response2$data","logout","_","_err$response3","_err$response3$data","fetchMe","get","_err$response4","_err$response4$data","initialState","status","error","authSlice","name","reducers","resetError","state","extraReducers","builder","addCase","pending","fulfilled","action","rejected","actions","reducer"],"sources":["/home/sbh/divyo/TaskManager/frontend/src/features/auth/authSlice.js"],"sourcesContent":["// src/features/auth/authSlice.js\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport api from \"../../api/apiClient\";\n\n// Async actions\nexport const signup = createAsyncThunk(\"auth/signup\", async (payload, { rejectWithValue }) => {\n  try {\n    const res = await api.post(\"/auth/signup\", payload);\n    return res.data.user;\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Signup failed\");\n  }\n});\n\nexport const login = createAsyncThunk(\"auth/login\", async (payload, { rejectWithValue }) => {\n  try {\n    const res = await api.post(\"/auth/login\", payload);\n    return res.data.user;\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Login failed\");\n  }\n});\n\nexport const logout = createAsyncThunk(\"auth/logout\", async (_, { rejectWithValue }) => {\n  try {\n    await api.post(\"/auth/logout\");\n    return null;\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Logout failed\");\n  }\n});\n\nexport const fetchMe = createAsyncThunk(\"auth/fetchMe\", async (_, { rejectWithValue }) => {\n  try {\n    const res = await api.get(\"/auth/me\");\n    return res.data.user;\n  } catch (err) {\n    return rejectWithValue(err.response?.data?.message || \"Fetch user failed\");\n  }\n});\n\n// Initial state\nconst initialState = {\n  user: null,\n  status: \"idle\", // 'idle' | 'loading' | 'succeeded' | 'failed'\n  error: null,\n};\n\n// Slice\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    resetError(state) {\n      state.error = null;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      // Signup\n      .addCase(signup.pending, (state) => {\n        state.status = \"loading\";\n        state.error = null;\n      })\n      .addCase(signup.fulfilled, (state, action) => {\n        state.status = \"succeeded\";\n        state.user = action.payload;\n      })\n      .addCase(signup.rejected, (state, action) => {\n        state.status = \"failed\";\n        state.error = action.payload;\n      })\n\n      // Login\n      .addCase(login.pending, (state) => {\n        state.status = \"loading\";\n        state.error = null;\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.status = \"succeeded\";\n        state.user = action.payload;\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.status = \"failed\";\n        state.error = action.payload;\n      })\n\n      // Logout\n      .addCase(logout.fulfilled, (state) => {\n        state.status = \"idle\";\n        state.user = null;\n        state.error = null;\n      })\n      .addCase(logout.rejected, (state, action) => {\n        state.status = \"failed\";\n        state.error = action.payload;\n      })\n\n      // Fetch Me\n      .addCase(fetchMe.pending, (state) => {\n        state.status = \"loading\";\n        state.error = null;\n      })\n      .addCase(fetchMe.fulfilled, (state, action) => {\n        state.status = \"succeeded\";\n        state.user = action.payload;\n      })\n      .addCase(fetchMe.rejected, (state, action) => {\n        state.status = \"failed\";\n        state.error = action.payload;\n      });\n  },\n});\n\n// Export actions and reducer\nexport const { resetError } = authSlice.actions;\nexport default authSlice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}