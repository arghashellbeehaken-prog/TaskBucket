{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport api from \"../../api/apiClient\";\nexport const fetchTask = createAsyncThunk(\"task/fetch\", async () => {\n  const res = await api.get(\"/tasks\");\n  return res.data.data;\n});\nexport const createTask = createAsyncThunk(\"tasks/create\", async payload => {\n  const res = await api.post(\"/tasks\", payload);\n  return res.data.data;\n});\nexport const updateTask = createAsyncThunk(\"tasks/update\", async ({\n  id,\n  payload\n}) => {\n  const res = await api.put(`/tasks/${id}`, payload);\n  return res.data.data;\n});\nexport const deleteTask = createAsyncThunk(\"tasks/delete\", async id => {\n  await api.delete(`/tasks/${id}`);\n  return id;\n});\nexport const addSubtask = createAsyncThunk(\"tasks/addSubtask\", async ({\n  id,\n  text\n}) => {\n  const res = await api.post(`/tasks/${id}/subtasks`, {\n    text\n  });\n  return res.data.data;\n});\nexport const toggleSubtask = createAsyncThunk(\"tasks/toggleSubtask\", async ({\n  id,\n  subId\n}) => {\n  const res = await api.patch(`/tasks/${id}/subtasks/${subId}/toggle`);\n  return res.data.data;\n});\nexport const deleteSubtask = createAsyncThunk(\"tasks/deleteSubtask\", async ({\n  id,\n  subId\n}) => {\n  const res = await api.delete(`/tasks/${id}/subtasks/${subId}`);\n  return res.data.data;\n});\nconst slice = createSlice({\n  name: \"tasks\",\n  initialState: {\n    items: [],\n    status: \"idle\"\n  },\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(fetchTask.fulfilled, (state, action) => state.items = action.payload).addCase(createTask.fulfilled, (state, action) => state.items.unshift(action.payload)).addCase(updateTask.fulfilled, (state, action) => {\n      state.items = state.items.map(t => t._id === action.payload._id ? action.payload : t);\n    }).addCase(deleteTask.fulfilled, (state, action) => {\n      state.items = state.items.filter(t => t._id !== action.payload);\n    }).addCase(addSubtask.fulfilled, (state, action) => {\n      state.items = state.items.map(t => t._id === action.payload._id ? action.payload : t);\n    }).addCase(toggleSubtask.fulfilled, (state, action) => {\n      state.items = state.items.map(t => t._id === action.payload._id ? action.payload : t);\n    }).addCase(deleteSubtask.fulfilled, (state, action) => {\n      state.items = state.items.map(t => t._id === action.payload._id ? action.payload : t);\n    });\n  }\n});\nexport default slice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","api","fetchTask","res","get","data","createTask","payload","post","updateTask","id","put","deleteTask","delete","addSubtask","text","toggleSubtask","subId","patch","deleteSubtask","slice","name","initialState","items","status","reducers","extraReducers","builder","addCase","fulfilled","state","action","unshift","map","t","_id","filter","reducer"],"sources":["/home/sbh/divyo/TaskManager/frontend/src/features/tasks/tasksSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport api from \"../../api/apiClient\";\n\nexport const fetchTask = createAsyncThunk(\"task/fetch\", async () => {\n  const res = await api.get(\"/tasks\");\n  return res.data.data;\n});\n\nexport const createTask = createAsyncThunk(\"tasks/create\", async (payload) => {\n  const res = await api.post(\"/tasks\", payload);\n  return res.data.data;\n});\n\nexport const updateTask = createAsyncThunk(\"tasks/update\", async ({ id, payload }) => {\n  const res = await api.put(`/tasks/${id}`, payload);\n  return res.data.data;\n});\n\nexport const deleteTask = createAsyncThunk(\"tasks/delete\", async (id) => {\n  await api.delete(`/tasks/${id}`);\n  return id;\n});\n\nexport const addSubtask = createAsyncThunk(\"tasks/addSubtask\", async ({ id, text }) => {\n  const res = await api.post(`/tasks/${id}/subtasks`, { text });\n  return res.data.data;\n});\n\nexport const toggleSubtask = createAsyncThunk(\"tasks/toggleSubtask\", async ({ id, subId }) => {\n  const res = await api.patch(`/tasks/${id}/subtasks/${subId}/toggle`);\n  return res.data.data;\n});\n\nexport const deleteSubtask = createAsyncThunk(\"tasks/deleteSubtask\", async ({ id, subId }) => {\n  const res = await api.delete(`/tasks/${id}/subtasks/${subId}`);\n  return res.data.data;\n});\n\nconst slice = createSlice({\n  name: \"tasks\",\n  initialState: { items: [], status: \"idle\" },\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchTask.fulfilled, (state, action) => (state.items = action.payload))\n      .addCase(createTask.fulfilled, (state, action) => state.items.unshift(action.payload))\n      .addCase(updateTask.fulfilled, (state, action) => {\n        state.items = state.items.map((t) => (t._id === action.payload._id ? action.payload : t));\n      })\n      .addCase(deleteTask.fulfilled, (state, action) => {\n        state.items = state.items.filter((t) => t._id !== action.payload);\n      })\n      .addCase(addSubtask.fulfilled, (state, action) => {\n        state.items = state.items.map((t) => (t._id === action.payload._id ? action.payload : t));\n      })\n      .addCase(toggleSubtask.fulfilled, (state, action) => {\n        state.items = state.items.map((t) => (t._id === action.payload._id ? action.payload : t));\n      })\n      .addCase(deleteSubtask.fulfilled, (state, action) => {\n        state.items = state.items.map((t) => (t._id === action.payload._id ? action.payload : t));\n      });\n  },\n});\n\nexport default slice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}